{% extends "base.html" %}
{% block title %}Fixtures{% endblock %}
{% block script %}
    <script>
    async function filterLeagues() {
        const select_elm = document.getElementById("league")
        var select = document.getElementById("season").value;
        let response = await fetch('leagueinfofetch');
        let leagues = await response.json();
        let arr = []

        leagues.forEach(l => {
            if (l.season_id == select){
                arr.push(l)
            }
        })

        select_elm.innerHTML=""
        const defaultvalue = document.createElement("option")
        defaultvalue.textContent = "Select League"
        select_elm.appendChild(defaultvalue)
        arr.forEach(league => {
            const option = document.createElement("option");
            option.value = league.id
            option.textContent = league.name;
            select_elm.appendChild(option);
        });
    }

    </script>
{% endblock %}
{% block heading %}
<div class="pageTitle">
    <h1 style="margin-top: 10%">Fixtures</h1>
</div>
{% endblock %}
{% block content %}
    <form method="POST" style="margin-top: 1rem" action="/add-Fixtures">
        <div>
            <label style="margin-top: 1rem">Select Season
                <select class="form-select" aria-label="Season Select" name="season" id="season" onchange="filterLeagues()">
                    <option value="">Select Season</option>
                    {% for season in seasons %}
                        <option value="{{ season.id }}">{{ season.name }}</option>
                    {% endfor %}
                </select>
            </label>
            <label style="margin-top: 1rem">Select League
                <select class="form-select" aria-label="League Select" name="league" id="league" onchange="filterClubs()">
                    <option value="">Select League</option>
                </select>
            </label>
        </div>
    </form>
{% endblock %}